import unittest
from vatval.utils import validate_vat


class ValidateVATTestCase(unittest.TestCase):
    def setUp(self):
        # Format: (country_code, vat, is_valid)
        # Some of these VAT examples were extracted from JSVAT library:
        # https://github.com/se-panfilov/jsvat
        self.vat_examples = (
            # -- Austria -- #
            ('AT', 'ATU00000024', True),
            ('AT', 'ATU00000033', True),
            ('AT', 'ATU00000042', True),
            ('AT', 'ATU00000202', True),
            ('AT', 'ATU00000060', True),
            ('AT', 'ATU00000079', True),
            ('AT', 'ATU00000088', True),
            ('AT', 'ATU00000104', True),
            ('AT', 'ATU00000113', True),
            ('AT', 'ATU00000122', True),
            ('AT', 'ATU00000140', True),
            ('AT', 'ATU00000159', True),
            ('AT', 'ATU00000168', True),
            ('AT', 'ATU00000186', True),
            ('AT', 'ATU00000195', True),
            ('AT', 'ATU00000202', True),
            ('AT', 'ATU12011204', True),
            ('AT', 'ATU10223006', True),
            ('AT', 'ATU15110001', True),
            ('AT', 'ATU15394605', True),
            ('AT', 'ATU15416707', True),
            ('AT', 'ATU15662209', True),
            ('AT', 'ATU16370905', True),
            ('AT', 'ATU23224909', True),
            ('AT', 'ATU25775505', True),
            ('AT', 'ATU28560205', True),
            ('AT', 'ATU28609707', True),
            ('AT', 'ATU28617100', True),
            ('AT', 'ATU29288909', True),
            ('AT', 'ATU37675002', True),
            ('AT', 'ATU37785508', True),
            ('AT', 'ATU37830200', True),
            ('AT', 'ATU38420507', True),
            ('AT', 'ATU38516405', True),
            ('AT', 'ATU39364503', True),
            ('AT', 'ATU42527002', True),
            ('AT', 'ATU43666001', True),
            ('AT', 'ATU43716207', True),
            ('AT', 'ATU45766309', True),
            ('AT', 'ATU47977701', True),
            ('AT', 'ATU49487700', True),
            ('AT', 'ATU51009402', True),
            ('AT', 'ATU51507409', True),
            ('AT', 'ATU51749808', True),
            ('AT', 'ATU52699307', True),
            ('AT', 'ATU57477929', True),
            ('AT', 'ATU58044146', True),
            ('AT', 'ATU61255233', True),
            ('AT', 'ATU61993034', True),
            ('AT', 'ATU62134737', True),
            ('AT', 'ATU62593358', True),
            ('AT', 'ATU62765626', True),
            ('AT', 'ATU62895905', True),
            ('AT', 'ATU62927729', True),
            ('AT', 'ATU63436026', True),
            ('AT', 'ATU64487479', True),
            ('AT', 'ATU64762368', True),
            ('AT', 'ATU64727905', True),
            ('AT', 'ATU64938189', True),
            ('AT', 'ATU66664013', True),
            ('AT', 'ATU66889218', True),
            ('AT', 'ATV66889218', False),
            ('AT', 'ATU10223001', False),
            ('AT', 'ATU10223002', False),
            ('AT', 'ATU10223003', False),
            ('AT', 'ATU10223004', False),
            ('AT', 'ATU10223005', False),
            ('AT', 'ATU10223007', False),

            # -- Bulgaria -- #
            # -- Croatia -- #
            # -- Cyprus -- #
            # -- Denmark -- #
            ('DK', 'DK10000009', True),
            ('DK', 'DK10000017', True),
            ('DK', 'DK10000025', True),
            ('DK', 'DK10000157', True),
            ('DK', 'DK10000033', True),
            ('DK', 'DK10000041', True),
            ('DK', 'DK10000068', True),
            ('DK', 'DK10000076', True),
            ('DK', 'DK10000084', True),
            ('DK', 'DK10000092', True),
            ('DK', 'DK10000106', True),
            ('DK', 'DK10000114', True),
            ('DK', 'DK10000122', True),
            ('DK', 'DK10000130', True),
            ('DK', 'DK10000149', True),
            ('DK', 'DK10000157', True),
            ('DK', 'DK12935110', True),
            ('DK', 'DK18424649', True),
            ('DK', 'DK18630036', True),
            ('DK', 'DK19475298', True),
            ('DK', 'DK20214414', True),
            ('DK', 'DK20342781', True),
            ('DK', 'DK21659509', True),
            ('DK', 'DK25160924', True),
            ('DK', 'DK25760352', True),
            ('DK', 'DK25763858', True),
            ('DK', 'DK26134439', True),
            ('DK', 'DK27509185', True),
            ('DK', 'DK27919502', True),
            ('DK', 'DK28323271', True),
            ('DK', 'DK28702612', True),
            ('DK', 'DK29189757', True),
            ('DK', 'DK29206600', True),
            ('DK', 'DK29283958', True),
            ('DK', 'DK30559150', True),
            ('DK', 'DK31119103', True),
            ('DK', 'DK32569943', True),
            ('DK', 'DK32780806', True),
            ('DK', 'DK33266022', True),
            ('DK', 'DK37131415', True),
            ('DK', 'DK44023911', True),
            ('DK', 'DK67758919', True),
            ('DK', 'DK71186911', True),
            ('DK', 'DK75142412', True),
            ('DK', 'DK78805218', True),
            ('DK', '31119103', True),
            ('DK', '17741519', True),
            ('DK', 'DK47458714', True),
            ('DK', '25887026', True),
            ('DK', '31119100', False),
            ('DK', '47458710', False),
            ('DK', 'DK17741510', False),
            ('DK', 'DK10000000', False),
            ('DK', 'DK10000010', False),
            ('DK', 'DK10000020', False),
            ('DK', 'DK10000150', False),
            ('DK', 'DK10000030', False),

            # -- Finland -- #
            ('FI', 'FI09853608', True),
            ('FI', 'FI00000027', True),
            ('FI', 'FI00000035', True),
            ('FI', 'FI00000043', True),
            ('FI', 'FI00000174', True),
            ('FI', 'FI00000078', True),
            ('FI', 'FI00000086', True),
            ('FI', 'FI00000094', True),
            ('FI', 'FI00000115', True),
            ('FI', 'FI00000123', True),
            ('FI', 'FI00000131', True),
            ('FI', 'FI00000166', True),
            ('FI', 'FI00000174', True),
            ('FI', 'FI00000182', True),
            ('FI', 'FI00000203', True),
            ('FI', 'FI00000211', True),
            ('FI', 'FI00000238', True),
            ('FI', 'FI01244162', True),
            ('FI', 'FI02459042', True),
            ('FI', 'FI06312080', True),
            ('FI', 'FI08405256', True),
            ('FI', 'FI09441865', True),
            ('FI', 'FI08326937', True),
            ('FI', 'FI10154054', True),
            ('FI', 'FI10227508', True),
            ('FI', 'FI15380325', True),
            ('FI', 'FI15501019', True),
            ('FI', 'FI15482348', True),
            ('FI', 'FI15719544', True),
            ('FI', 'FI16802358', True),
            ('FI', 'FI17377883', True),
            ('FI', 'FI17405469', True),
            ('FI', 'FI17764656', True),
            ('FI', 'FI18261444', True),
            ('FI', 'FI18919760', True),
            ('FI', 'FI20303674', True),
            ('FI', 'FI21044950', True),
            ('FI', 'FI22780669', True),
            ('FI', 'FI22811357', True),
            ('FI', 'FI22283574', True),
            ('FI', 'FI22969621', True),
            ('FI', 'FI22975669', True),
            ('FI', 'FI24498085', True),
            ('FI', 'FI24710461', True),
            ('FI', 'FI01120389', True),
            ('FI', '15728600', True),
            ('FI', '07375462', True),
            ('FI', 'FI09853601', False),
            ('FI', 'FI00000023', False),
            ('FI', 'FI00000036', False),
            ('FI', 'FI00000048', False),
            ('FI', 'FI00000173', False),
            ('FI', 'FI00000071', False),

            # -- Italy -- #
            ('IT', 'IT00000010215', True),
            ('IT', 'IT00079760328', True),
            ('IT', 'IT00140390501', True),
            ('IT', 'IT00144659992', True),
            ('IT', 'IT00224320234', True),
            ('IT', 'IT00383590486', True),
            ('IT', 'IT00453840357', True),
            ('IT', 'IT00488410010', True),
            ('IT', 'IT00502591209', True),
            ('IT', 'IT00697300150', True),
            ('IT', 'IT00754150100', True),
            ('IT', 'IT00820340966', True),
            ('IT', 'IT00902170018', True),
            ('IT', 'IT01021630668', True),
            ('IT', 'IT01044120358', True),
            ('IT', 'IT01114601006', True),
            ('IT', 'IT01219560800', True),
            ('IT', 'IT01390230462', True),
            ('IT', 'IT01654960473', True),
            ('IT', 'IT02118311006', True),
            ('IT', 'IT02121151001', True),
            ('IT', 'IT02458160245', True),
            ('IT', 'IT07234250962', True),
            ('IT', 'IT03084300171', True),
            ('IT', 'IT05067600154', True),
            ('IT', 'IT06363391001', True),
            ('IT', 'IT06515871009', True),
            ('IT', 'IT06631330963', True),
            ('IT', 'IT06895721006', True),
            ('IT', 'IT07129470014', True),
            ('IT', 'IT08146570018', True),
            ('IT', 'IT08792831003', True),
            ('IT', 'IT10000100015', True),
            ('IT', 'IT10000200013', True),
            ('IT', 'IT10000300011', True),
            ('IT', 'IT10000500016', True),
            ('IT', 'IT10000600014', True),
            ('IT', 'IT10000700012', True),
            ('IT', 'IT10000900018', True),
            ('IT', 'IT10001000016', True),
            ('IT', 'IT10001100014', True),
            ('IT', 'IT10001300010', True),
            ('IT', 'IT10001400018', True),
            ('IT', 'IT10001500015', True),
            ('IT', 'IT10001700011', True),
            ('IT', 'IT10001708881', True),
            ('IT', 'IT10001701209', True),
            ('IT', 'IT10001701217', True),
            ('IT', 'IT10001709996', True),
            ('IT', 'IT10001800019', True),
            ('IT', 'IT10001900017', True),
            ('IT', 'IT11005760159', True),
            ('IT', 'IT12066470159', True),
            ('IT', 'IT12286350157', True),
            ('IT', 'IT12683790153', True),
            ('IT', 'IT13378520152', True),
            ('IT', 'IT05142860484', True),
            ('IT', 'IT01709820995', True),
            ('IT', '02124651007', True),
            ('IT', '00281310060', True),
            ('IT', 'IT02342990153', True),
            ('IT', 'IT00000010210', False),
            ('IT', 'IT10000100010', False),
            ('IT', 'IT10000200010', False),
            ('IT', 'IT0000300010', False),
            ('IT', 'IT10001900010', False),
            ('IT', 'IT10000500010', False),
            ('IT', 'IT10000600010', False),
            ('IT', 'IT10001708882', False),
            ('IT', 'IT10001701202', False),
            ('IT', 'IT10001701216', False),

            # -- Portugal -- #
            ('PT', 'PT100000010', True),
            ('PT', 'PT100000029', True),
            ('PT', 'PT100000037', True),
            ('PT', 'PT100000193', True),
            ('PT', 'PT100000053', True),
            ('PT', 'PT100000061', True),
            ('PT', 'PT100000070', True),
            ('PT', 'PT100000096', True),
            ('PT', 'PT100000100', True),
            ('PT', 'PT100000118', True),
            ('PT', 'PT100000134', True),
            ('PT', 'PT100000142', True),
            ('PT', 'PT100000150', True),
            ('PT', 'PT100000177', True),
            ('PT', 'PT100000185', True),
            ('PT', 'PT100000193', True),
            ('PT', 'PT501413197', True),
            ('PT', 'PT501519246', True),
            ('PT', 'PT501570691', True),
            ('PT', 'PT502011378', True),
            ('PT', 'PT502757191', True),
            ('PT', 'PT502790610', True),
            ('PT', 'PT503079502', True),
            ('PT', 'PT503362999', True),
            ('PT', 'PT503731552', True),
            ('PT', 'PT503701378', True),
            ('PT', 'PT503729108', True),
            ('PT', 'PT504030108', True),
            ('PT', 'PT504141066', True),
            ('PT', 'PT504178873', True),
            ('PT', 'PT504194739', True),
            ('PT', 'PT505289385', True),
            ('PT', 'PT505448173', True),
            ('PT', 'PT505856468', True),
            ('PT', 'PT506429210', True),
            ('PT', 'PT506774287', True),
            ('PT', 'PT507132831', True),
            ('PT', 'PT507400011', True),
            ('PT', 'PT507599470', True),
            ('PT', 'PT507852605', True),
            ('PT', 'PT508219612', True),
            ('PT', 'PT509221785', True),
            ('PT', 'PT509280285', True),
            ('PT', 'PT509626416', True),
            ('PT', 'PT510765009', True),
            ('PT', 'PT980405319', True),
            ('PT', '501442600', True),
            ('PT', '504296434', True),
            ('PT', '500100144', True),
            ('PT', '131546473', True),
            ('PT', 'PT999999990', True),
            ('PT', 'PT999999999', False),
            ('PT', 'PT502757192', False),
            ('PT', 'PT100000012', False),
            ('PT', 'PT100000022', False),
            ('PT', 'PT100000032', False),
            ('PT', 'PT100000192', False),
            ('PT', 'PT100000052', False),
        )

    def test_validate_vat_raises_value_error_with_invalid_country_code(self):
        self.assertRaises(ValueError, validate_vat, 'ZZ', '')

    def test_validate_vat(self):
        for country_code, vat, is_valid in self.vat_examples:
            self.assertEqual(validate_vat(country_code, vat), is_valid,
                             f'Test for VAT: ({country_code}, {vat}) failed')


if __name__ == '__main__':
    unittest.main()
